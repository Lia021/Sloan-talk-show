<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <script src="https://aframe.io/releases/0.3.0/aframe.min.js"></script>
  <script src="https://sdk.altvr.com/libs/altspace.js/2.6.0/altspace.min.js"></script>
  <script>
    // n-skeleton-parent only works with root meshes at the moment. Since most model loaders use a root
    // container object, we need to collapse the model so that n-skeleton-parent can access the mesh directly.
    AFRAME.registerComponent('collapse-model', {
        init: function () {
            this.el.addEventListener('model-loaded', function () {
                this.el.object3DMap.mesh.updateMatrixWorld();
                var mesh;
                this.el.object3DMap.mesh.traverse(function (obj) {
                    if (!mesh && obj instanceof THREE.Mesh) {
                        mesh = obj;
                    }
                }.bind(this))
                if (mesh) {
                    this.el.sceneEl.object3D.updateMatrixWorld(true);
                    mesh.scale.copy(mesh.getWorldScale());
                    this.el.setObject3D('mesh', mesh);
                    // setObject3D emits this event in a-frame 0.4.0
                    this.el.emit('object3dset', {
                        type: 'mesh'
                    });
                }
            }.bind(this));
        }
    });
  </script>
  <script>
    altspace.getThreeJSTrackingSkeleton().then(function (skeleton) {
          window.head = skeleton.getJoint('Head');
        });
        AFRAME.registerComponent('altspace-look-at', {
          init: function () {
            if (!window.altspace || !altspace.inClient) { return; }
          },
          tick: function () {
            if (!window.head || !this.el.object3D) { return; }
            this.el.object3D.lookAt(window.head.position); 
          }
        })
  </script>

  <body>
    <a-scene altspace=fullspace:true sync-system="author: bookgirl; app: sloan">
        
 <a-assets>
     
    <a-asset-item id="trash" src="https://rawgit.com/Lia021/Sloan-talk-show/master/trash/trash.dae"></a-asset-item>
    <a-asset-item id="brick" src="https://rawgit.com/Lia021/Sloan-talk-show/master/brickwall/brickwall.dae"></a-asset-item>
    <a-asset-item id="bleacher" src="https://rawgit.com/Lia021/Sloan-talk-show/master/sloan/bleachers.dae"></a-asset-item>
    <a-asset-item id="garbage" src="https://rawgit.com/Lia021/Sloan-talk-show/master/garbage/garbage.dae"></a-asset-item>
    <a-asset-item id="mask" src="https://rawgit.com/Lia021/Sloan-talk-show/master/camilla%20mask/mask.dae"></a-asset-item>
    <a-asset-item id="board" src="https://cdn.rawgit.com/Lia021/model/0d1f715d/bell/bell.dae"></a-asset-item>
    
	<img id="message" src="https://rawgit.com/Lia021/Sloan-talk-show/master/Mature%20audience.jpg">
    <img id="ok-button" src="https://rawgit.com/Lia021/Sloan-talk-show/master/okay.jpg">
    <img id="cockpit-button" src="https://rawgit.com/Lia021/Sloan-talk-show/master/information.jpg">	
   
    <a-mixin id="notification-bg"
        geometry="primitive: plane; width: 1; height: 0.5" material="transparent: true; src: #message"
        n-cockpit-parent altspace-cursor-collider="enabled: true"></a-mixin>
    <a-mixin id="closes-dialog"
        wire="on: click; emit: close-dialog; targets: #dialog"></a-mixin>
    <a-mixin id="button"
        geometry="primitive: plane; width: 0.4; height: 0.1;" position="0 -0.50 0.001"
        material="transparent: true; src: #ok-button"
        n-cockpit-parent altspace-cursor-collider="enabled: true"></a-mixin>

    <a-mixin id="cockpit"
            position="0.6 -0.15 -0.8" rotation="-30 0 0" 
        geometry="primitive: plane; width: 0.4; height: 0.1" 
            material="transparent: true; src: #cockpit-button"
         n-cockpit-parent altspace-cursor-collider="enabled: true"></a-mixin>

    <a-mixin id="mask" collada-model="#mask" collapse-model></a-mixin>
    
            <a-mixin id="parent-to-head" position="0 0.0` -0.13" scale="1.40 1.40 1.40" rotation="0 180 0" n-skeleton-parent="part:head;" sync sync-n-skeleton-parent></a-mixin>
    
     
     
 </a-assets>

 <!--info-->
 <a-entity id="dialog" position="0 0.6 -1" scale="0.0001 0.0001 0.0001" n-cockpit-parent>
    <a-animation attribute="scale" begin="toggle-dialog" dur="1" from="0.0001 0.0001 0.0001" to="1 1 1" direction="alternate"></a-animation>
    <a-animation attribute="scale" begin="close-dialog" dur="1" from="1 1 1" to="0.0001 0.0001 0.0001"></a-animation>
    <a-entity mixin="notification-bg"></a-entity>
    <a-entity id="ok" mixin="button closes-dialog"
        navigate="link: #weblink"
          wire__enter="on: mouseenter; emit: over; target: #ok"
        wire__leave="on: mouseleave; emit: leave; target: #ok">
        <a-animation attribute="scale" begin="over" dur="100" from="1 1 1" to="1.1 1.1 1.1"></a-animation>
        <a-animation attribute="scale" begin="leave" dur="100" from="1.1 1.1 1.1" to="1 1 1"></a-animation>
    </a-entity>
 
    <a-entity id="close-hover" mixin="close2">
        <a-animation attribute="scale" begin="over" dur="1" from="0.0001 0.0001 0.0001" to="0.05 0.05 0.05"></a-animation>
        <a-animation attribute="scale" begin="leave" dur="1" from="0.05 0.05 0.05" to="0.0001 0.0001 0.0001"></a-animation>
    </a-entity>			  
 </a-entity>
 <a-entity id="cockpit-notification" mixin="cockpit"
      wire="on: click; emit: toggle-dialog; targets: #dialog;"
    wire__over="on: mouseenter; emit: cockpit-over;"
    wire__leave="on: mouseleave; emit: cockpit-leave;">
    <a-animation attribute="scale" begin="cockpit-over" dur="100" from="1 1 1" to="1.1 1.1 1.1"></a-animation>
    <a-animation attribute="scale" begin="cockpit-leave" dur="100" from="1.1 1.1 1.1" to="1 1 1"></a-animation>
 </a-entity> 

   <!--trash-->
     
   <a-entity position="0.30 0 0.15" scale="10 10 10" rotation="0 180 0" collada-model="#trash"n-mesh-collider="type: environment; convex: false"></a-entity>
   
   <!--garbage-->
     
   <a-entity position="0.30 -0.08 0.15" scale="10 10 10" rotation="0 180 0" collada-model="#garbage"n-mesh-collider="type: environment; convex: false"></a-entity>
   

  <!--brick-->
    
  <a-entity position="0.05 0 1.50" scale="10 10 25" rotation="0 -90 0" collada-model="#brick"n-mesh-collider="type: environment; convex: false"></a-entity>
  
  <!-- Basic cylinder. -->

  <a-cylinder position="0 -0.24 0"opacity="1"color="#36383a" height="0.50" radius="3.90"></a-cylinder>

  <!--fire-->

  <a-entity n-object='res: effects/fire'position="-0.50 1.40 0.30"></a-entity>

  <!--fire2-->

 <a-entity n-object='res: effects/fire'position="0.05 1.40 0.30"></a-entity>

 <!--fire3-->

 <a-entity n-object='res: effects/fire'position="0.50 1.40 0.30"></a-entity>

 <!--fire4-->

 <a-entity n-object='res: effects/fire'position="0.50 1.40 -0.05"></a-entity>

 <!--fire5-->
 
 <a-entity n-object='res: effects/fire'position="0.05 1.40 -0.05"></a-entity>

 <!--fire6-->

 <a-entity n-object='res: effects/fire'position="-0.50 1.40 -0.05"></a-entity>

 

 <!--sphere-->

 <a-sphere position="0 20 5"opacity="0.1"color="black" n-sphere-collider="type: environment; radius: 2"radius="2"></a-sphere>

 <!-- blocker -->

 <a-box position="0 4.50 -12.30" opacity="0"color="black" depth="1" height="2" width="1"n-mesh-collider="type: environment; convex: false"></a-box>


  <!--poster-->
    
  <a-image position="2.30 2 1.43" src="https://rawgit.com/Lia021/Sloan-talk-show/master/camilla%20dee.jpg" opacity="1" altspace-cursor-collider="enabled: false" rotation="0 180 0" width="0.80" height="1">
  </a-image>

 
  <!--mask-->

 <a-entity position="0.30 1.50 1.58"scale="1.30 1.30 1.30" rotation="0 0 0" mixin="mask" instantiator="on: click;group: mask; mixin: mask parent-to-head"></a-entity>

 <!--treanbone-->

 <a-entity position="-0.20 4 -12">
  <a-entity id="pc-s" sync="own-on: s" sync-n-sound n-sound="on: s; src:https://rawgit.com/Lia021/Sloan-talk-show/master/soundeffects/Sad_Trombone_-_Sad_Trombone.ogg;"></a-entity>
  <a-entity id="gear-s" sync="own-on: s" sync-n-sound n-sound="on: s; src:https://rawgit.com/Lia021/Sloan-talk-show/master/soundeffects/Sad%20Trombone%20-%20Sad%20Trombone.mp3;"></a-entity>
  <a-box wire="on: click; emit: s; targets: #pc-s, #gear-s;" color="yellow"depth="0.1" height="0.1" width="0.1"opacity="0.1" rotation="0 0 0"></a-box>
 </a-entity>

 <!--please-->

 <a-entity position="-0.40 4 -12">
  <a-entity id="pc-p" sync="own-on: p" sync-n-sound n-sound="on: p; src:https://rawgit.com/Lia021/Sloan-talk-show/master/soundeffects/Please_-_Please_Sound_Effect.ogg;"></a-entity>
  <a-entity id="gear-p" sync="own-on: p" sync-n-sound n-sound="on: p; src:https://rawgit.com/Lia021/Sloan-talk-show/master/soundeffects/Please%20-%20Please%20Sound%20Effect.mp3;"></a-entity>
  <a-box wire="on: click; emit: p; targets: #pc-p, #gear-p;" color="orange"depth="0.1" height="0.1" width="0.1"opacity="0.1"opacity="0.1"rotation="0 0 0"></a-box>
 </a-entity>

 <!--tudda-->

 <a-entity position="0.20 4 -12">
  <a-entity id="pc-b" sync="own-on: b" sync-n-sound n-sound="on: b; src:https://rawgit.com/Lia021/Sloan-talk-show/master/soundeffects/TADAAH_-_TADAAH.ogg;"></a-entity>
  <a-entity id="gear-b" sync="own-on: b" sync-n-sound n-sound="on: b; src:https://rawgit.com/Lia021/Sloan-talk-show/master/soundeffects/TADAAH%20-%20TADAAH.mp3;"></a-entity>
  <a-box wire="on: click; emit: b; targets: #pc-b, #gear-b;" color="black"depth="0.1" height="0.1" width="0.1"opacity="0.1"opacity="0.2" rotation="0 0 0"></a-box>
 </a-entity>

 <!--ohyeah-->

 <a-entity position="0 4 -12">
  <a-entity id="pc-u" sync="own-on: u" sync-n-sound n-sound="on: u; src:https://rawgit.com/Lia021/Sloan-talk-show/master/soundeffects/Oh_-_Oh_Yeah_Sound_Effect_.ogg;"></a-entity>
  <a-entity id="gear-u" sync="own-on: u" sync-n-sound n-sound="on: u; src:https://rawgit.com/Lia021/Sloan-talk-show/master/soundeffects/Oh%20-%20Oh%20Yeah%20(Sound%20Effect).mp3;"></a-entity>
  <a-box wire="on: click; emit: u; targets: #pc-u, #gear-u;" color="blue"depth="0.1" height="0.1" width="0.1"opacity="0.1"opacity="0.1"rotation="0 0 0"></a-box>
 </a-entity>

 <!--musicsloan-->

 <a-entity position="0 1 1.70">
  <a-entity id="pc-m" sync="own-on: m" sync-n-sound n-sound="on: m; src:https://rawgit.com/Lia021/Sloan-talk-show/master/soundeffects/sloan.ogg;"></a-entity>
  <a-entity id="gear-m" sync="own-on: m" sync-n-sound n-sound="on: m; src:https://rawgit.com/Lia021/Sloan-talk-show/master/soundeffects/sloan.mp3;"></a-entity>
  <a-box wire="on: click; emit: m; targets: #pc-m, #gear-m;" color="red"depth="0.2" height="0.2" width="0.2"opacity="1" rotation="0 0 0"></a-box>
 </a-entity>


 <!--fart-->

 <a-entity position="0.50 1 1.70">
  <a-entity id="pc-f" sync="own-on: f" sync-n-sound n-sound="on: f; src:https://rawgit.com/Lia021/Sloan-talk-show/master/soundeffects/Fart_-_Fart_Sound_Effect.ogg;"></a-entity>
  <a-entity id="gear-f" sync="own-on: f" sync-n-sound n-sound="on: f; src:https://rawgit.com/Lia021/Sloan-talk-show/master/soundeffects/Fart%20-%20Fart%20Sound%20Effect.mp3;"></a-entity>
  <a-box wire="on: click; emit: f; targets: #pc-f, #gear-f;" color="green"depth="0.2" height="0.2" width="0.2"opacity="1" rotation="0 0 0"></a-box>
 </a-entity>

